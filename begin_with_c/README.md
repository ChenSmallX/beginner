# C语言入门手册
武汉理工大学计算机协会©2019

本教程着重于“从实践入手，逐步了解C语言运作方法”，并起到抛砖引玉的效果，将各位初学者引入C语言学习的世界。

## Step 0x00 Simplest C code

首先我们先来看一个最简单的样例程序：

```c
int main()
{
    return 0;
}
```

没错，这是个最简单的C语言程序，或许有同学会觉得这程序也太简短了吧，完全做不了什么呀~

是的，这代码是最简短的，的确什么都做不了(实际上是做了“给系统返回了个0”这样的操作)，但是可以看出一个C程序应该包含的最基本的东西。

我们来分析一下这串代码：

这串代码里面包含了一个函数——main函数。首先介绍一个概念，一个能够独立运行的C语言程序必须包括一个main函数，main函数是供给系统调用这个程序的入口。这也就是为什么一个不包含main函数的代码文件可以通过编译却无法独立运行的原因。

main函数具备了所有函数应该具备的所有素质，包括函数返回类型，函数名，函数参数表，函数体以及返回值。一一映射到上面代码就是：

```c
返回类型 函数名(函数参数表)
{
    函数体·流程代码
    函数体·返回值
}
```

返回类型
> 返回类型是为了告诉调用此函数的上层函数“我返回一个此类型的值，而你如果要使用这个值，则需要使用一个此类型的变量去接受这个值”。

函数名
> 顾名思义，就是调用这个函数的时候用的标识符。

函数体·流程
> 函数体即为函数内部的具体实现，也就是代码对传入的数据要做出的“动作”，当然，没有数据传入的函数也可以有自己的“动作”。

函数体·返回值
> 这一步是必要的，返回的数据必须对应上面提到的函数的`返回类型`。  
> 当函数返回类型为`void`时，`return`语句为可选(可用于流程中间显示跳出函数，在不显示使用`return`语句时编译器会自动帮助`void`类型函数添加`return`流程)，但不可认为当前函数无返回值，因为`void`也是一种返回值。。

本节到此结束，感兴趣的同学可以在自己的IDE(Integrated Development Environment, 集成开发环境)或者编辑器中编写代码，并使用编译器编译运行观察系统执行的行为(如果是Windows系统建议在cmd中调用编译好的程序，或者使用`dev-cpp` or `codeblocks`这类会在退出处暂停的IDE)。

## Step 0x01 Output Some Thing

看过上一节：
> S: 一个这样的程序能干嘛？  
> T: 啥都干不了！  
> S: ...  
> T: 不要灰心，现在教你在屏幕上打印一点东西，嘻嘻~

那么我们现在开始吧~

```c
#include <stdio.h>
int main()
{
    printf("Hello world\n");
    return 0;
}
```

通过观察，我们可以发现，这串代码和上一节的样例代码有一点不同，多了两行代码。  
接下来我们来着重看看这两行多出来的：

```c
#include<stdio.h>
```

这里用到C语言编译器的一个功能——预处理~！(注意！预处理并不是C语言本身的特性，而是编译器的特性，只不过每一个编译器都为了保证代码编写者在编码时的开发体验而主动包含了这个特性而已！)

在C语言代码中，以"`#`"开头的行，均为编译器预处理操作指令。例如在此处的include指令，意为在编译开始前，将`stdio.h`这个文件的内容包含到当前文件中。

```c
printf("Hello world!\n");
```

这一行代码估计很多有英文基础的同学都能看出一二，大概就是将后面那串字符打印出来，毕竟看到了"print"嘛。  
好了，现在我们具体就这串代码来细细讲解一番。

首先这个函数的函数名为`printf`，具体大家如何理解其中的意思都无妨，见仁见智，通常可以看做"print function"(打印函数)或者"print formatted"(格式化打印)，我个人是偏向于后者。

为什么呢？因为`scanf`(一个即将要讲解的函数)和`printf`是“格式化输入输出”函数族中最典型的两个，这一族函数提供可定格式样式的输入和输出。说白了就是在使用这一大类的函数时，那么多的数据，你想让他按照什么形式输出，他就会乖乖地按照你给定的形式来输出（是不是有了一种计算机第一次实实在在掌控在自己手中的感觉呢 :233: ）。

那么我们如何才能使用这个函数呢？很多同学已经猜到了，那就是需要代码里头有`#include<stdio.h>`才行。这是为什么呢，因为这个函数是在标准库里头的，是前人为我们设计好的函数，我们只管用就好了，无需理会它如何具体实现(当然，这也没法理会，这算是Windows|Unix||Linux的系统调用，属于操作系统功能的一部分)。

在非C语言关键字之后如果紧跟(此处不算空格和换行)圆括号对：`(`和`)`，此时构成函数调用操作符。函数在定义之后，只有加上了函数调用符才可以对此函数进行调用，否则都只能代表这里使用了这个函数名(为什么会有这个奇葩的概念呢，因为进展到后面会有函数指针这种奇葩登西，指针直接等于这个函数名的时候可以使用这个指针实现对函数的调用，从而实现一个叫做“回调函数”的骚操作)。

中间的`"Hello world!\n"`是`printf`接受的参数表中的参数之一，只有参数符合参数表的格式，函数才能被正确调用，编译才能通过。那么问题来了，为什么说只是参数之一呢？因为`printf`的参数是一个可变长参数表，其原型为`int printf( const char *format, ... );`，可以传入很多很多的参数供格式化输出的字符串(不好意思，扯远了...)。

总之呢，使用`printf`函数就可以打印东西在屏幕上啦(屁嘞，只是打印在黑框框里头啦！)。

看点样例吧~

```c
#include <stdio.h>
int main()
{
    int i;
    double d;
    i = 1;
    d = 2.0;
    printf("Now will print two numbers to the screen.\n");
    printf("the integer number i = %d\n", i);
    printf("the double precision floatting point number d = %lf\n", d);
    printf("Good bye!\n");
    return 0;
}
```

这节就到此为止啦，希望小伙伴们可以多多查找关于printf函数的资料，充分理解此函数是如何使用的，然后魔改样例代码，实现自己想要实现的程序吧~

一些可供阅读的参考资料：

[菜鸟教程 - printf()](https://www.runoob.com/cprogramming/c-function-printf.html)

[printf - C++ Reference](http://www.cplusplus.com/reference/cstdio/printf/)

[格式化字符串 - 维基百科](https://zh.wikipedia.org/wiki/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2)

## Step 0x02 Go Get Some Thing

小伙伴们在试过往屏幕打印东西之后，也有了想要从屏幕获取数据的愿望吧？
那么，本节主要讲解上一节说到的与`printf`“一对儿”的`scanf`函数。

`scanf`，顾名思义，`scan`就是扫描，`scanf`就是扫描的函数或者扫描的格式，在屏幕上扫描内容并且读进程序。
多说无益，来看样例~！

```c
#include <stdio.h>
int main()
{
    int i;
    double d;
    printf("input an integer: ");
    scanf("%d", &i);
    printf("input a double: ");
    scanf("%lf", &d);
    printf("input end!\nthe integer i = %d\n", i);
    printf("the double d = %lf\n", d);
    return 0;
}
```

经过前两节洗礼的同学，这次在看到这段代码的时候，应该大概可以看明白scanf这个函数具体是用来做什么的了吧~

可以看出来，`scanf("%d", &i);`和`scanf("%lf", &d);`两条语句分别读取了两个数字分别存在i和d变量里头。  
这里和printf稍微有点不一样的是，在参数表里面的变量。在scanf中，需要在变量前面加上"&"号，这个符号是"取地址符"，即`&i`为`i`在内存中的具体位置。  
为什么要传入地址呢？因为我们在使用函数时，直接在函数参数表中使用变量名传入参数，则计算机会将这个变量的内容拷贝一份到另一个内存地址中并告诉即将被调用的函数去使用新拷贝出来的那份数据，从而不影响原来的这份数据。  
又因为我们使用`scanf`这类读取数据的函数恰恰是为了去改变一个变量的值，所以就必须把我们想要改变值的变量的内存地址传入`scanf`（在同一个程序内，系统给分配的每个内存空间的地址是唯一的），这样`scanf`才能通过这个唯一的内存地址去直接往内存中写入数据。由于传入内存地址是在`scanf`外申请且唯一的，所以在`scanf`里头修改的内存空间对于`scanf`外也是有效且持久的，所以我们就顺利地通过`scanf`获取到数据了。

而再具体的，`scanf`是如何从屏幕黑框框中我们输入的字符串读到东西又转换成具体我们需要的类型的呢，就要又要依照每个操作系统内建的系统调用实现方式而不同了。

参考资料：

[菜鸟教程 - scanf](https://www.runoob.com/cprogramming/c-function-scanf.html)

[scanf - C++ Reference](http://www.cplusplus.com/reference/cstdio/scanf/)

---

未完待续...
